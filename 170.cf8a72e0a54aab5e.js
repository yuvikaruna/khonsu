"use strict";(self.webpackChunkkhonsu=self.webpackChunkkhonsu||[]).push([[170],{8170:(lt,_,r)=>{r.r(_),r.d(_,{SupplierModule:()=>ot});var g=r(6895),c=r(9132),Z=r(1783),l=r(4006),t=r(4650),T=r(141),x=r(1645),S=r(1481),m=r(1576),N=r(4859),d=r(3546),v=r(3162),f=r(9549),P=r(4144);function E(e,n){1&e&&(t.TgZ(0,"span",12),t._uU(1,"+ 91 \xa0"),t.qZA())}function L(e,n){if(1&e&&(t.ynx(0),t._uU(1),t.BQk()),2&e){const i=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.AsE(" ",o.label," is ",i," ")}}function Y(e,n){if(1&e&&(t.TgZ(0,"mat-error"),t.YNc(1,L,2,2,"ng-container",13),t.qZA()),2&e){const i=n.$implicit,o=t.oxw().$implicit,a=t.oxw();t.xp6(1),t.Q6J("ngIf",a.supplierForm.controls[o.formControlName].touched&&a.supplierForm.controls[o.formControlName].hasError(i))}}function U(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"mat-form-field",9)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",10),t.YNc(5,E,2,0,"span",11),t.YNc(6,Y,2,1,"mat-error",5),t.qZA(),t.BQk()),2&e){const i=n.$implicit;t.xp6(3),t.Oqu(i.label),t.xp6(1),t.s9C("placeholder",i.placeholder),t.Q6J("formControlName",i.formControlName)("type",i.inputType),t.xp6(1),t.Q6J("ngIf","mobileNum"===i.formControlName||"ownerMobileNum"===i.formControlName),t.xp6(1),t.Q6J("ngForOf",i.validatorsList)}}function M(e,n){1&e&&t._UZ(0,"mat-progress-bar",14)}let A=(()=>{class e{constructor(i,o,a,s,u,rt){this.logger=i,this.notificationService=o,this.titleService=a,this.fb=s,this.route=u,this.router=rt,this.SUPPLIER_TYPE={ADD:"Add Supplier",EDIT:"Edit Supplier"},this.loading=!1,this.submitted=!1,this.formControlValues=[{label:"Supplier Name",placeholder:"Enter your Supplier Name",formControlName:"supplierName",inputType:"text",validatorsList:["required"]},{label:"Mobile Number",placeholder:"Enter your Mobile Number",formControlName:"mobileNum",inputType:"text",validatorsList:["required","invalid"]},{label:"GSTIN/TIN Number",placeholder:"Enter your GSTIN/TIN Number",formControlName:"gstNum",inputType:"string",validatorsList:["required","invalid"]},{label:"Owner Name",placeholder:"Enter your Owner Name",formControlName:"ownerName",inputType:"text",validatorsList:["required"]},{label:"Owner Mobile Number",placeholder:"Enter your Owner Mobile Number",formControlName:"ownerMobileNum",inputType:"text",validatorsList:["required","invalid"]},{label:"Shop Address",placeholder:"Enter your Shop Address",formControlName:"shopAddress",inputType:"text",validatorsList:["required"]},{label:"City",placeholder:"Enter your City",formControlName:"city",inputType:"text",validatorsList:["required"]},{label:"Pin Code",placeholder:"Enter your Pin Code",formControlName:"pinCode",inputType:"number",validatorsList:["required","invalid"]},{label:"Remarks",placeholder:"Enter your Remarks",formControlName:"remarks",inputType:"text",validatorsList:[]}],this.supplier=this.router.getCurrentNavigation()?.extras?.state?.supplier}ngOnInit(){this.PAGE_TYPE=this.route.snapshot.params.id?this.SUPPLIER_TYPE.EDIT:this.SUPPLIER_TYPE.ADD,this.logger.log(this.PAGE_TYPE+" loaded"),this.titleService.setTitle("Khonsu - "+this.PAGE_TYPE),this.supplierForm=this.fb.group({supplierName:["",l.kI.required],mobileNum:["",[l.kI.required,e=>{const n=e.value;return!/^((\\+91-?)|0)?[0-9]{10}$/.test(n)&&n?{invalid:!0}:null},l.kI.minLength(10),l.kI.maxLength(10)]],gstNum:["",[l.kI.required,e=>{const n=e.value;return!/^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$/.test(n)&&n?{invalid:!0}:null}]],ownerName:["",l.kI.required],ownerMobileNum:["",[l.kI.required,e=>{const n=e.value;return!/^((\\+91-?)|0)?[0-9]{10}$/.test(n)&&n?{invalid:!0}:null},l.kI.minLength(10),l.kI.maxLength(10)]],shopAddress:[""],city:[""],pinCode:["",[e=>{const n=e.value;return!/^[1-9]{1}[0-9]{5}$/.test(n)&&n&&6!=n.length?{invalid:!0}:null}]],remarks:[""]}),this.PAGE_TYPE==this.SUPPLIER_TYPE.EDIT&&(console.log(this.supplier),this.supplierForm.patchValue({supplierName:this.supplier?.supplier_name,mobileNum:this.supplier?.phone,gstNum:this.supplier?.gst,ownerName:this.supplier?.shop_name,ownerMobileNum:this.supplier?.phone,shopAddress:this.supplier?.supplier_name}),this.supplierForm.invalid&&this.router.navigate(["supplier/list"]))}addSupplier(){this.submitted=!0,!this.supplierForm.invalid&&(this.loading=!0,this.PAGE_TYPE==this.SUPPLIER_TYPE.EDIT?(this.loading=!1,this.notificationService.openSnackBar("Customers Updated"),this.router.navigate(["supplier/list"])):this.PAGE_TYPE==this.SUPPLIER_TYPE.ADD&&(this.notificationService.openSnackBar("Customers Added"),this.loading=!1,this.supplierForm.reset()))}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(T.Kf),t.Y36(x.g),t.Y36(S.Dx),t.Y36(l.qu),t.Y36(c.gz),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-supplier"]],decls:13,vars:6,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],["fxLayout","column"],["fxFlex","80","fxLayoutAlign","center none",1,"container"],[3,"formGroup"],[4,"ngFor","ngForOf"],[1,"button-actions"],["mat-raised-button","","color","primary",3,"disabled","click"],["mode","indeterminate",4,"ngIf"],["appearance","outline",1,"full-width","fix-suffix"],["matInput","",3,"placeholder","formControlName","type"],["matPrefix","",4,"ngIf"],["matPrefix",""],[4,"ngIf"],["mode","indeterminate"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content",2)(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"div",3)(7,"form",4),t.YNc(8,U,7,6,"ng-container",5),t.qZA()()(),t.TgZ(9,"mat-card-actions",6)(10,"button",7),t.NdJ("click",function(){return o.addSupplier()}),t._uU(11),t.qZA()(),t.YNc(12,M,1,0,"mat-progress-bar",8),t.qZA()()()),2&i&&(t.xp6(5),t.Oqu(o.PAGE_TYPE),t.xp6(2),t.Q6J("formGroup",o.supplierForm),t.xp6(1),t.Q6J("ngForOf",o.formControlValues),t.xp6(2),t.Q6J("disabled",o.supplierForm.invalid||o.loading),t.xp6(1),t.hij(" ",o.PAGE_TYPE," "),t.xp6(1),t.Q6J("ngIf",o.loading))},dependencies:[g.sg,g.O5,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,m.xw,m.Wh,m.yH,N.lW,d.a8,d.dn,d.hq,v.pW,f.TO,f.KE,f.hX,f.qo,P.Nt],styles:[".container[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex;place-content:center;align-items:center;justify-content:space-between}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{flex-direction:column;box-sizing:border-box;display:flex;place-content:center;align-items:center;flex-grow:1}.button-actions[_ngcontent-%COMP%]{display:flex;justify-content:center}.button-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex-grow:1;margin-bottom:1rem}.b-d-1rm[_ngcontent-%COMP%]{border-radius:.5rem!important}"]}),e})();var h=r(6308),p=r(7155),O=r(6635),q=r(7392);function w(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," No. "),t.qZA())}function I(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"No. :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.position," ")}}function D(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1,"Supplier Name "),t.qZA())}function k(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"Supplier Name :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.supplier_name," ")}}function F(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Phone "),t.qZA())}function Q(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"Phone :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.phone," ")}}function G(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Email "),t.qZA())}function J(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"Email :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.email," ")}}function B(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Trade Name "),t.qZA())}function $(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"Trade Name :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.shop_name," ")}}function j(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," GST "),t.qZA())}function R(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"GST :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.gst," ")}}function H(e,n){1&e&&(t.TgZ(0,"th",16),t._uU(1," Status "),t.qZA())}function z(e,n){if(1&e&&(t.TgZ(0,"td",17)(1,"span",18),t._uU(2,"Status :"),t.qZA(),t._uU(3),t.qZA()),2&e){const i=n.$implicit;t.xp6(3),t.hij(" ",i.status," ")}}function K(e,n){1&e&&(t.TgZ(0,"th",19),t._uU(1," Actions "),t.qZA())}function V(e,n){if(1&e){const i=t.EpF();t.TgZ(0,"td",17)(1,"button",20),t.NdJ("click",function(){const s=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.editSupplier(s))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.TgZ(4,"span",18),t._uU(5,"Edit"),t.qZA()(),t.TgZ(6,"button",21),t.NdJ("click",function(){const s=t.CHM(i).$implicit,u=t.oxw();return t.KtG(u.deleteSupplier(s))}),t.TgZ(7,"mat-icon"),t._uU(8,"delete"),t.qZA(),t.TgZ(9,"span",18),t._uU(10,"Delete"),t.qZA()()()}}function W(e,n){1&e&&t._UZ(0,"tr",22)}function X(e,n){1&e&&t._UZ(0,"tr",23)}const et=[{path:"",component:Z.$,children:[{path:"list",component:(()=>{class e{constructor(i,o,a,s,u){this.logger=i,this.notificationService=o,this.supplierService=a,this.titleService=s,this.router=u,this.displayedColumns=["position","supplier_name","phone","email","shop_name","gst","status","actions"],this.sort=new h.YE,this.PAGE_TYPE="Suppliers List"}ngOnInit(){this.getSupplierList(),this.titleService.setTitle("Khonsu - "+this.PAGE_TYPE),this.logger.log("Customers loaded"),this.notificationService.openSnackBar("Customers loaded")}getSupplierList(){this.supplierService.getSupplierList().subscribe(i=>{this.dataSource=new p.by(i),this.dataSource.sort=this.sort})}editSupplier(i){this.router.navigate(["supplier/edit/"+i.supplier_id],{state:{supplier:i}})}deleteSupplier(i){console.log(i)}}return e.\u0275fac=function(i){return new(i||e)(t.Y36(T.Kf),t.Y36(x.g),t.Y36(O.p),t.Y36(S.Dx),t.Y36(c.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-supplier-list"]],viewQuery:function(i,o){if(1&i&&t.Gf(h.YE,7),2&i){let a;t.iGM(a=t.CRH())&&(o.sort=a.first)}},decls:33,vars:4,consts:[["fxLayout","row","fxLayoutAlign","center none",1,"container"],["fxFlex","95%"],["mat-table","","matSort","",1,"supplier-list",3,"dataSource"],["matColumnDef","position"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","supplier_name"],["matColumnDef","phone"],["matColumnDef","email"],["matColumnDef","shop_name"],["matColumnDef","gst"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],[1,"mobile-label"],["mat-header-cell",""],["mat-button","","color","primary",3,"click"],["mat-button","","color","accent",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-card")(3,"mat-card-content")(4,"h2"),t._uU(5),t.qZA(),t.TgZ(6,"table",2),t.ynx(7,3),t.YNc(8,w,2,0,"th",4),t.YNc(9,I,4,1,"td",5),t.BQk(),t.ynx(10,6),t.YNc(11,D,2,0,"th",4),t.YNc(12,k,4,1,"td",5),t.BQk(),t.ynx(13,7),t.YNc(14,F,2,0,"th",4),t.YNc(15,Q,4,1,"td",5),t.BQk(),t.ynx(16,8),t.YNc(17,G,2,0,"th",4),t.YNc(18,J,4,1,"td",5),t.BQk(),t.ynx(19,9),t.YNc(20,B,2,0,"th",4),t.YNc(21,$,4,1,"td",5),t.BQk(),t.ynx(22,10),t.YNc(23,j,2,0,"th",4),t.YNc(24,R,4,1,"td",5),t.BQk(),t.ynx(25,11),t.YNc(26,H,2,0,"th",4),t.YNc(27,z,4,1,"td",5),t.BQk(),t.ynx(28,12),t.YNc(29,K,2,0,"th",13),t.YNc(30,V,11,0,"td",5),t.BQk(),t.YNc(31,W,1,0,"tr",14),t.YNc(32,X,1,0,"tr",15),t.qZA()()()()()),2&i&&(t.xp6(5),t.Oqu(o.PAGE_TYPE),t.xp6(1),t.Q6J("dataSource",o.dataSource),t.xp6(25),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[m.xw,m.Wh,m.yH,q.Hw,N.lW,d.a8,d.dn,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,h.YE,h.nU],styles:["table[_ngcontent-%COMP%]{width:100%}th.mat-sort-header-sorted[_ngcontent-%COMP%]{color:#000}.mobile-label[_ngcontent-%COMP%]{display:none}@media (max-width: 700px){.mobile-label[_ngcontent-%COMP%]{width:auto;display:inline-block;font-weight:700}.mat-header-row[_ngcontent-%COMP%]{display:none}.mat-row[_ngcontent-%COMP%]{display:grid;flex-direction:column;align-items:start;padding:8px 24px}tr.mat-row[_ngcontent-%COMP%], tr.mat-footer-row[_ngcontent-%COMP%]{height:auto;border:1px solid black;margin:1rem}.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:first-child{padding-left:0!important}.mat-table.supplier-list[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]:last-child{width:auto;text-align:left}}"]}),e})()},{path:"add",component:A},{path:"edit/:id",component:A}]}];let it=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[c.Bz.forChild(et),c.Bz]}),e})();var nt=r(3927);let ot=(()=>{class e{}return e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.ez,nt.m,it]}),e})()}}]);